<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Therapy Compliance Analyzer</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/chart.js/3.9.1/chart.min.css" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <div class="logo-section">
                    <i class="fas fa-stethoscope"></i>
                    <h1>Therapy Compliance Analyzer</h1>
                    <span class="ai-badge">Powered by Meditron-7B Clinical AI</span>
                </div>
                <div class="header-controls">
                    <div class="user-info">
                        <i class="fas fa-user-md"></i>
                        <span id="userName">Clinical User</span>
                    </div>
                    <div class="system-status">
                        <div class="status-item">
                            <i class="fas fa-robot"></i>
                            <span id="aiStatus">AI Ready</span>
                        </div>
                        <div class="status-item">
                            <i class="fas fa-server"></i>
                            <span id="apiStatus">Connecting...</span>
                        </div>
                        <div class="status-item">
                            <i class="fas fa-memory"></i>
                            <span id="memoryStatus">--</span>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Navigation Tabs -->
        <nav class="tab-navigation">
            <div class="tab-container">
                <button class="tab-btn active" data-tab="analysis">
                    <i class="fas fa-brain"></i>
                    Analysis
                </button>
                <button class="tab-btn" data-tab="dashboard">
                    <i class="fas fa-chart-line"></i>
                    Dashboard
                </button>
                <button class="tab-btn" data-tab="history">
                    <i class="fas fa-history"></i>
                    History
                </button>
                <button class="tab-btn" data-tab="habits">
                    <i class="fas fa-seedling"></i>
                    7 Habits
                </button>
                <button class="tab-btn" data-tab="settings">
                    <i class="fas fa-cog"></i>
                    Settings
                </button>
                <button class="tab-btn" data-tab="help">
                    <i class="fas fa-question-circle"></i>
                    Help
                </button>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Analysis Tab -->
            <div class="tab-content active" id="analysisTab">
                <div class="analysis-layout">
                    <!-- Left Panel: Document Upload & Preview -->
                    <div class="left-panel">
                        <div class="upload-section">
                            <div class="upload-card">
                                <div class="upload-header">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <h3>Upload Clinical Document</h3>
                                    <p>Analyze therapy documentation for Medicare compliance</p>
                                </div>

                                <div class="upload-area" id="uploadArea">
                                    <div class="upload-content">
                                        <i class="fas fa-file-medical"></i>
                                        <p>Drag & drop your document here</p>
                                        <p class="upload-subtitle">or click to browse</p>
                                        <input type="file" id="fileInput" accept=".pdf,.docx,.txt" hidden>
                                    </div>
                                </div>

                                <div class="upload-options">
                                    <div class="option-group">
                                        <label for="discipline">Therapy Discipline:</label>
                                        <select id="discipline">
                                            <option value="pt">Physical Therapy (PT)</option>
                                            <option value="ot">Occupational Therapy (OT)</option>
                                            <option value="slp">Speech-Language Pathology (SLP)</option>
                                        </select>
                                    </div>

                                    <div class="option-group">
                                        <label for="analysisMode">Analysis Mode:</label>
                                        <select id="analysisMode">
                                            <option value="rubric">Rubric-Based Analysis</option>
                                            <option value="checklist">Checklist Validation</option>
                                            <option value="hybrid">Hybrid Analysis</option>
                                        </select>
                                    </div>

                                    <div class="option-group">
                                        <label for="rubricSelect">Compliance Rubric:</label>
                                        <select id="rubricSelect">
                                            <option value="medicare_pt">Medicare PT Guidelines</option>
                                            <option value="medicare_ot">Medicare OT Guidelines</option>
                                            <option value="medicare_slp">Medicare SLP Guidelines</option>
                                            <option value="custom">Custom Rubric</option>
                                        </select>
                                    </div>
                                </div>

                                <button class="analyze-btn" id="analyzeBtn" disabled>
                                    <i class="fas fa-brain"></i>
                                    Analyze with Meditron AI
                                </button>
                            </div>
                        </div>

                        <!-- Document Preview -->
                        <div class="document-preview">
                            <div class="preview-header">
                                <h4><i class="fas fa-eye"></i> Document Preview</h4>
                                <div class="preview-controls">
                                    <button id="highlightBtn" class="btn-icon" title="Toggle Highlighting">
                                        <i class="fas fa-highlighter"></i>
                                    </button>
                                    <button id="searchBtn" class="btn-icon" title="Search Document">
                                        <i class="fas fa-search"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="preview-content" id="documentPreview">
                                <div class="preview-placeholder">
                                    <i class="fas fa-file-alt"></i>
                                    <p>Upload a document to see preview</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Right Panel: Analysis Results -->
                    <div class="right-panel">
                        <div class="results-container" id="resultsContainer" style="display: none;">
                            <!-- Quick Stats -->
                            <div class="quick-stats">
                                <div class="stat-card">
                                    <div class="stat-icon high-risk">
                                        <i class="fas fa-exclamation-triangle"></i>
                                    </div>
                                    <div class="stat-info">
                                        <div class="stat-value" id="highRiskCount">0</div>
                                        <div class="stat-label">High Risk</div>
                                    </div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-icon medium-risk">
                                        <i class="fas fa-exclamation-circle"></i>
                                    </div>
                                    <div class="stat-info">
                                        <div class="stat-value" id="mediumRiskCount">0</div>
                                        <div class="stat-label">Medium Risk</div>
                                    </div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-icon low-risk">
                                        <i class="fas fa-info-circle"></i>
                                    </div>
                                    <div class="stat-info">
                                        <div class="stat-value" id="lowRiskCount">0</div>
                                        <div class="stat-label">Low Risk</div>
                                    </div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-icon compliance-score">
                                        <i class="fas fa-chart-pie"></i>
                                    </div>
                                    <div class="stat-info">
                                        <div class="stat-value" id="complianceScore">--</div>
                                        <div class="stat-label">Compliance Score</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Analysis Report -->
                            <div class="analysis-report">
                                <div class="report-header">
                                    <h4><i class="fas fa-clipboard-list"></i> Analysis Report</h4>
                                    <div class="report-actions">
                                        <button class="btn-secondary" id="exportReportBtn">
                                            <i class="fas fa-download"></i>
                                            Export
                                        </button>
                                        <button class="btn-secondary" id="chatBtn">
                                            <i class="fas fa-comments"></i>
                                            AI Chat
                                        </button>
                                    </div>
                                </div>
                                <div class="report-content" id="reportContent">
                                    <!-- Report will be loaded here -->
                                </div>
                            </div>
                        </div>

                        <!-- Analysis Progress -->
                        <div class="progress-container" id="progressContainer" style="display: none;">
                            <div class="progress-header">
                                <h4><i class="fas fa-cogs"></i> AI Analysis in Progress</h4>
                            </div>
                            <div class="progress-steps">
                                <div class="step" id="step1">
                                    <i class="fas fa-file-upload"></i>
                                    <span>Document Processing</span>
                                </div>
                                <div class="step" id="step2">
                                    <i class="fas fa-brain"></i>
                                    <span>AI Analysis</span>
                                </div>
                                <div class="step" id="step3">
                                    <i class="fas fa-check-circle"></i>
                                    <span>Report Generation</span>
                                </div>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="progressFill"></div>
                            </div>
                            <div class="progress-status" id="progressStatus">
                                Initializing Meditron Clinical AI...
                            </div>
                        </div>

                        <!-- Default State -->
                        <div class="default-state" id="defaultState">
                            <div class="default-content">
                                <i class="fas fa-robot"></i>
                                <h3>Ready for Analysis</h3>
                                <p>Upload a clinical document to begin AI-powered compliance analysis with Meditron-7B</p>
                                <div class="feature-highlights">
                                    <div class="feature">
                                        <i class="fas fa-shield-alt"></i>
                                        <span>HIPAA Compliant</span>
                                    </div>
                                    <div class="feature">
                                        <i class="fas fa-microchip"></i>
                                        <span>Local AI Processing</span>
                                    </div>
                                    <div class="feature">
                                        <i class="fas fa-certificate"></i>
                                        <span>Medicare Guidelines</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Dashboard Tab -->
            <div class="tab-content" id="dashboardTab">
                <div class="dashboard-layout">
                    <div class="dashboard-header">
                        <h2><i class="fas fa-chart-line"></i> Compliance Dashboard</h2>
                        <button class="btn-primary" id="refreshDashboard">
                            <i class="fas fa-sync-alt"></i>
                            Refresh
                        </button>
                    </div>

                    <!-- KPI Cards -->
                    <div class="kpi-grid">
                        <div class="kpi-card">
                            <div class="kpi-icon">
                                <i class="fas fa-file-medical-alt"></i>
                            </div>
                            <div class="kpi-content">
                                <div class="kpi-value" id="totalDocuments">0</div>
                                <div class="kpi-label">Total Documents</div>
                            </div>
                        </div>
                        <div class="kpi-card">
                            <div class="kpi-icon">
                                <i class="fas fa-percentage"></i>
                            </div>
                            <div class="kpi-content">
                                <div class="kpi-value" id="avgCompliance">0%</div>
                                <div class="kpi-label">Avg. Compliance</div>
                            </div>
                        </div>
                        <div class="kpi-card">
                            <div class="kpi-icon">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <div class="kpi-content">
                                <div class="kpi-value" id="totalFindings">0</div>
                                <div class="kpi-label">Total Findings</div>
                            </div>
                        </div>
                        <div class="kpi-card">
                            <div class="kpi-icon">
                                <i class="fas fa-calendar-week"></i>
                            </div>
                            <div class="kpi-content">
                                <div class="kpi-value" id="weeklyAnalyses">0</div>
                                <div class="kpi-label">This Week</div>
                            </div>
                        </div>
                    </div>

                    <!-- Charts Section -->
                    <div class="charts-grid">
                        <div class="chart-card">
                            <div class="chart-header">
                                <h4>Compliance Trends</h4>
                            </div>
                            <div class="chart-container">
                                <canvas id="complianceTrendChart"></canvas>
                            </div>
                        </div>
                        <div class="chart-card">
                            <div class="chart-header">
                                <h4>Risk Distribution</h4>
                            </div>
                            <div class="chart-container">
                                <canvas id="riskDistributionChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Activity -->
                    <div class="activity-section">
                        <h4><i class="fas fa-clock"></i> Recent Activity</h4>
                        <div class="activity-list" id="recentActivity">
                            <!-- Activity items will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- History Tab -->
            <div class="tab-content" id="historyTab">
                <div class="history-layout">
                    <div class="history-header">
                        <h2><i class="fas fa-history"></i> Analysis History</h2>
                        <div class="history-controls">
                            <input type="search" id="historySearch" placeholder="Search analyses...">
                            <select id="historyFilter">
                                <option value="all">All Analyses</option>
                                <option value="pt">Physical Therapy</option>
                                <option value="ot">Occupational Therapy</option>
                                <option value="slp">Speech-Language Pathology</option>
                            </select>
                        </div>
                    </div>

                    <div class="history-table">
                        <table id="historyTable">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Document</th>
                                    <th>Discipline</th>
                                    <th>Compliance Score</th>
                                    <th>Findings</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="historyTableBody">
                                <!-- History items will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- 7 Habits Tab -->
            <div class="tab-content" id="habitsTab">
                <div class="habits-layout">
                    <div class="habits-header">
                        <h2><i class="fas fa-seedling"></i> 7 Habits of Highly Effective Clinicians</h2>
                        <p>Develop excellence in clinical documentation through proven principles</p>
                    </div>

                    <div class="habits-grid">
                        <div class="habit-card" data-habit="1">
                            <div class="habit-number">1</div>
                            <div class="habit-content">
                                <h4>Be Proactive</h4>
                                <p>Take initiative in documentation compliance</p>
                                <div class="habit-progress">
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 75%"></div>
                                    </div>
                                    <span>75%</span>
                                </div>
                            </div>
                        </div>
                        <!-- Additional habit cards... -->
                    </div>

                    <div class="habits-insights">
                        <h4>Your Growth Journey</h4>
                        <div class="insights-content" id="habitsInsights">
                            <!-- Personalized insights will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Settings Tab -->
            <div class="tab-content" id="settingsTab">
                <div class="settings-layout">
                    <div class="settings-header">
                        <h2><i class="fas fa-cog"></i> Settings</h2>
                    </div>

                    <div class="settings-sections">
                        <div class="settings-section">
                            <h4>AI Model Configuration</h4>
                            <div class="setting-item">
                                <label for="aiModel">Primary AI Model:</label>
                                <select id="aiModel">
                                    <option value="meditron-7b">Meditron-7B (Clinical)</option>
                                    <option value="phi-2">Phi-2 (General)</option>
                                </select>
                            </div>
                            <div class="setting-item">
                                <label for="confidenceThreshold">Confidence Threshold:</label>
                                <input type="range" id="confidenceThreshold" min="0.5" max="1.0" step="0.05" value="0.75">
                                <span id="confidenceValue">0.75</span>
                            </div>
                        </div>

                        <div class="settings-section">
                            <h4>Analysis Preferences</h4>
                            <div class="setting-item">
                                <label>
                                    <input type="checkbox" id="enableFactChecking" checked>
                                    Enable Fact Checking
                                </label>
                            </div>
                            <div class="setting-item">
                                <label>
                                    <input type="checkbox" id="enableHabitsFramework" checked>
                                    Enable 7 Habits Framework
                                </label>
                            </div>
                        </div>

                        <div class="settings-section">
                            <h4>Privacy & Security</h4>
                            <div class="setting-item">
                                <label>
                                    <input type="checkbox" id="enablePHIScrubbing" checked>
                                    Enable PHI Scrubbing
                                </label>
                            </div>
                            <div class="setting-item">
                                <label>
                                    <input type="checkbox" id="enableAuditLogging" checked>
                                    Enable Audit Logging
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="settings-actions">
                        <button class="btn-primary" id="saveSettings">
                            <i class="fas fa-save"></i>
                            Save Settings
                        </button>
                        <button class="btn-secondary" id="resetSettings">
                            <i class="fas fa-undo"></i>
                            Reset to Defaults
                        </button>
                    </div>
                </div>
            </div>

            <!-- Help Tab -->
            <div class="tab-content" id="helpTab">
                <div class="help-layout">
                    <div class="help-header">
                        <h2><i class="fas fa-question-circle"></i> Help & Documentation</h2>
                    </div>

                    <div class="help-sections">
                        <div class="help-section">
                            <h4>Getting Started</h4>
                            <div class="help-content">
                                <p>Learn how to use the Therapy Compliance Analyzer effectively:</p>
                                <ul>
                                    <li>Upload clinical documents in PDF, DOCX, or TXT format</li>
                                    <li>Select appropriate therapy discipline and analysis mode</li>
                                    <li>Review AI-generated compliance findings and recommendations</li>
                                    <li>Export reports for documentation and quality improvement</li>
                                </ul>
                            </div>
                        </div>

                        <div class="help-section">
                            <h4>AI Model Information</h4>
                            <div class="help-content">
                                <p><strong>Meditron-7B Clinical AI:</strong> Specialized medical language model trained on clinical literature and compliance guidelines.</p>
                                <ul>
                                    <li>Optimized for healthcare documentation analysis</li>
                                    <li>Understands Medicare and regulatory requirements</li>
                                    <li>Processes all data locally for HIPAA compliance</li>
                                </ul>
                            </div>
                        </div>

                        <div class="help-section">
                            <h4>Compliance Guidelines</h4>
                            <div class="help-content">
                                <p>The system analyzes documents against current Medicare guidelines and professional standards:</p>
                                <ul>
                                    <li>CMS documentation requirements</li>
                                    <li>APTA, ASHA, AOTA professional standards</li>
                                    <li>State and federal regulatory requirements</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- AI Chat Modal -->
        <div class="modal" id="chatModal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h4><i class="fas fa-robot"></i> AI Assistant</h4>
                    <button class="modal-close" id="closeChatModal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="chat-container">
                    <div class="chat-messages" id="chatMessages">
                        <!-- Chat messages will appear here -->
                    </div>
                    <div class="chat-input">
                        <input type="text" id="chatInput" placeholder="Ask about compliance findings...">
                        <button id="sendChatBtn">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Loading Overlay -->
        <div class="loading-overlay" id="loadingOverlay" style="display: none;">
            <div class="loading-content">
                <div class="loading-spinner"></div>
                <h3>Processing with Meditron AI</h3>
                <p>Analyzing clinical documentation for compliance...</p>
            </div>
        </div>

        <!-- Footer -->
        <footer class="app-footer">
            <div class="footer-content">
                <div class="footer-info">
                    <p><i class="fas fa-shield-alt"></i> HIPAA Compliant - All processing occurs locally</p>
                    <p><i class="fas fa-robot"></i> Powered by Meditron-7B Clinical AI Model</p>
                </div>
                <div class="footer-links">
                    <span>Version 2.0.0</span>
                    <span>|</span>
                    <a href="#" id="aboutBtn">About</a>
                    <span>|</span>
                    <a href="#" id="supportBtn">Support</a>
                </div>
            </div>
        </footer>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/chart.js/3.9.1/chart.min.js"></script>
    <script src="app.js"></script>
</body>
</html>